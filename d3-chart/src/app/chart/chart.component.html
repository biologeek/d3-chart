<div app-dot-tooltip class="tooltip" style="opacity: 0;"></div>
<svg [attr.height.px]="_dimensions.height" [attr.width.px]="_dimensions.width">
  <g id="chart">
    <g app-x-axis [brushPosition]="_brushPosition" [xAxisConfig]="_xAxis" (xAxisBuilt)="onXAxisChange($event)" [data]="_data"
      [autoScale]="_autoScale.x" [chartDimensions]="_dimensions">
    </g>
    <g *ngFor="let axis of _yAxes; let i = index" app-y-axis id="y-axis-{{i}}" [autoScale]="_autoScale.y" [yAxisConfig]="axis"
      [chartDimensions]="_dimensions" [brushPosition]="_yBrushPosition" [axisNumber]="i" [data]="_data" 
      (functionChange)="onYAxisChange($event)" (click)="onSelectAxis(axis)">
    </g>
    <defs app-clip-path [dimensions]="_dimensions"></defs>
    <g *ngIf="_axesReady[0]">
      <g app-curve clip-path="url(#clip)" *ngFor="let curve of _data.series; let i = index" id="path-{{curve.header.id}}"
        [data]="curve" [xAxis]="_xAxis" [yAxis]="_yAxes[curve.header.axis]" [serie]="i">
      </g>
      <g app-curve-dots-set *ngFor="let curve of _data.series" clip-path="url(#clip)" (selectAbscissa)="onSelectAbscissa($event)"
        id="dot-set-{{curve.header.id}}" [data]="curve" [xAxis]="_xAxis" [yAxis]="curve.y"></g>
    </g>
    <g app-brush-x class="brush brush-x" (brushXChange)="onBrushXChange($event)" [xAxisConfig]="_xAxis" [data]="_data"
      [chartDimensions]="_dimensions"></g>
    <g app-brush-y *ngIf="true" class="brush brush-y" (brushYChange)="onBrushYChange($event)" [yAxesConfig]="_yAxes"
      [data]="_data" [chartDimensions]="_dimensions"></g>
  </g>
</svg>